<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue JSX 使用指南 | 庶民样本</title>
    <meta name="description" content="EGOIST 在这里写作">
    
    
    <link rel="preload" href="/vuepress-theme-egoist/assets/css/0.styles.4100f462.css" as="style"><link rel="preload" href="/vuepress-theme-egoist/assets/js/app.ff7e2a0c.js" as="script"><link rel="preload" href="/vuepress-theme-egoist/assets/js/7.e9309730.js" as="script"><link rel="preload" href="/vuepress-theme-egoist/assets/js/55.f55e4720.js" as="script"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/32.0552f872.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/2.306c48f2.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/3.de3933fa.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/4.7027339a.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/5.9a023447.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/6.0b23b3ef.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/8.1ef736ca.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/9.089f14da.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/10.90532339.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/11.1cf9229d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/12.3d320571.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/13.781fa514.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/14.46d0beb3.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/15.e343dce4.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/16.698e1c9c.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/17.60865632.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/18.dc4e67c0.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/19.c2730497.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/20.80fad5af.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/21.c5f4f37f.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/22.f98393c6.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/23.e37f7664.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/24.669cb146.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/25.ec3bfb6e.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/26.ce9c7dc2.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/27.d3b35f73.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/28.3915c5f6.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/29.b50b6ace.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/30.696dc884.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/31.f67a77db.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/33.c6321ab9.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/34.b82896f4.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/35.d9f2fc5d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/36.39f6a30d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/37.1ef29e0e.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/38.6b7fa1fc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/39.ab9b6b96.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/40.a9fbabfc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/41.b1542eec.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/42.eb64ff9f.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/43.7d2b9071.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/44.793cb7d0.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/45.d544aa88.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/46.0f539cc5.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/47.fd43a0dc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/48.3d299ca0.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/49.2174a4db.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/50.191f9442.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/51.b2a28c58.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/52.da9ef4e5.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/53.cace61dd.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/54.842f4543.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/56.221f7aad.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/57.c0a4d767.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/58.df0838f9.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/59.fd7c112e.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/60.d10b16b1.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/61.0d401146.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/62.14accf47.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/63.53215d77.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/64.6ea5a974.js">
    <link rel="stylesheet" href="/vuepress-theme-egoist/assets/css/0.styles.4100f462.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-v-4eb3e300><header class="header" data-v-0c022ddd data-v-4eb3e300><h1 class="site-name" data-v-0c022ddd><a href="/vuepress-theme-egoist/" class="router-link-active" data-v-0c022ddd>
      e.z.
    </a></h1> <ul class="nav" data-v-0c022ddd><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/about.html" data-v-0c022ddd>about</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/girls.html" data-v-0c022ddd>girls</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/donate.html" data-v-0c022ddd>donate</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/tag/" data-v-0c022ddd>tags</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/category/" data-v-0c022ddd>categories</a></li></ul></header> <div class="main" data-v-4eb3e300><div class="page-header" data-v-4eb3e300><h1 class="page-title" data-v-4eb3e300>Vue JSX 使用指南</h1> <h2 class="page-subtitle" data-v-4eb3e300>
        JSX 相关专利归 NoFaceBoooooooooook 所有
      </h2></div> <div class="page-body" data-v-4eb3e300><!----> <div class="markdown-body" data-v-4eb3e300><div class="content custom" data-v-4eb3e300><h2 id="什么是-jsx"><a href="#什么是-jsx" aria-hidden="true" class="header-anchor">#</a> 什么是 JSX?</h2> <p>没怎么使用 React 或类似框架的同学可能不太了解 JSX，对此我不做赘述，简而言之这就是一种对 JavaScript 的补充，用来描述组件的 UI 部分，类似模板语言但它完整支持 JavaScript 本身的语言特性。</p> <p>参考 FaceBook <a href="https://facebook.github.io/react/docs/introducing-jsx.html" target="_blank" rel="noopener noreferrer">关于 JSX 的介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="转换-jsx"><a href="#转换-jsx" aria-hidden="true" class="header-anchor">#</a> 转换 JSX</h2> <p>JSX 只是对 JavaScript 的补充并没有浏览器的支持，所以你需要用 <a href="http://babeljs.io/" target="_blank" rel="noopener noreferrer">Babel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 搭配 <a href="https://github.com/vuejs/babel-preset-vue" target="_blank" rel="noopener noreferrer">babel-preset-vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来获得完整的 Vue JSX 功能。</p> <h2 id="使用-jsx"><a href="#使用-jsx" aria-hidden="true" class="header-anchor">#</a> 使用 JSX</h2> <h3 id="render-和-createelement-函数"><a href="#render-和-createelement-函数" aria-hidden="true" class="header-anchor">#</a> render 和 createElement 函数</h3> <p>你也许对 Vue 的 template (模板) 已经很熟悉了，如果你是用了 webpack + vue-loader 之类的组合，它其实是被转换成了 <code>render</code> 函数。</p> <p>对于以下单文件组件:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hello'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>被 webpack + vue-loader 处理后是:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hello'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> _h <span class="token operator">=</span> _vm<span class="token punctuation">.</span>$createElement<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _c <span class="token operator">=</span> _vm<span class="token punctuation">.</span>_self<span class="token punctuation">.</span>_c <span class="token operator">||</span> _h<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>_vm<span class="token punctuation">.</span><span class="token function">_v</span><span class="token punctuation">(</span>_vm<span class="token punctuation">.</span><span class="token function">_s</span><span class="token punctuation">(</span>_vm<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><small><em><a href="https://jsx.egoist.moe/gist/8a264502933118ee7afe811139bb52f6" target="_blank" rel="noopener noreferrer">在线调试<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em></small></p> <p>这里的 <a href="https://vuejs.org/v2/guide/render-function.html#createElement-Arguments" target="_blank" rel="noopener noreferrer">createElement<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数也经常被叫做 <code>h</code> 函数，它被用来创建一个 <a href="https://github.com/vuejs/vue/blob/dev/src/core/vdom/vnode.js" target="_blank" rel="noopener noreferrer">vNode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (虚拟 DOM 节点)。你可以通过 <code>this.$createElement</code> 访问它但同时它也是 <code>render</code> 函数的第一个参数。</p> <p>在使用 JSX 的时候，类似 template，不过只会转换 <code>render</code> 函数中的 JSX 表达式。</p> <p>对于以下源代码:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hello'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>它会被转换成:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hello'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>
      <span class="token string">'div'</span><span class="token punctuation">,</span>
      <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><small><em><a href="https://jsx.egoist.moe/gist/a2bda79dfa96053bc9bb5e743988796e" target="_blank" rel="noopener noreferrer">在线调试<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em></small></p> <h2 id="vue-jsx-特性"><a href="#vue-jsx-特性" aria-hidden="true" class="header-anchor">#</a> Vue JSX 特性</h2> <h3 id="和-react-jsx-的不同"><a href="#和-react-jsx-的不同" aria-hidden="true" class="header-anchor">#</a> 和 React JSX 的不同</h3> <p>Vue JSX 中 createElement 的第二个参数 <code>data</code> 与 React 中的有些不同，它是个嵌套的对象并且每个顶层的属性由不同的模块处理，提供不同的功能，比如 <code>class</code> (在 React 中是 <code>className</code>) 和 <code>on</code> 这两个属性:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>click
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>对应的 JSX 是:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>foo bar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">foo</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对于这种嵌套对象，你可以在 JSX 中用 camelCase 或者 kebeb-case (连字符) 来表示，换句话说这里 JSX 中的 <code>onClick</code> 也可以写成 <code>on-click</code>，前者是为了让熟悉 React JSX 的同学更方便而加入的。</p> <p>完整的属性列表请参考相关 <a href="https://github.com/vuejs/vue/blob/2deda3d4328eb7aea0adb0eaf01d68537ed0e0af/types/vnode.d.ts#L36-L60" target="_blank" rel="noopener noreferrer">typing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx#difference-from-react-jsx" target="_blank" rel="noopener noreferrer">README<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="v-model-插件页面"><a href="#v-model-插件页面" aria-hidden="true" class="header-anchor">#</a> v-model <sup><a href="https://github.com/nickmessing/babel-plugin-jsx-v-model" target="_blank" rel="noopener noreferrer">插件页面<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></sup></h3> <p>不久之前 Vue JSX 还不支持 <code>v-model</code> 因为这个转换比较复杂，感谢 <a href="https://github.com/nickmessing" target="_blank" rel="noopener noreferrer">@nickmessing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的 <a href="https://github.com/nickmessing/babel-plugin-jsx-v-model" target="_blank" rel="noopener noreferrer">babel-plugin-jsx-v-model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件。</p> <p>对于以下 template:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对应的 JSX 是:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>编译后:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _mergeJSXProps <span class="token keyword">from</span> <span class="token string">&quot;babel-helper-vue-jsx-merge-props&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

<span class="token function">h</span><span class="token punctuation">(</span>
  <span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span>
  <span class="token function">_mergeJSXProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    domProps<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span> _this<span class="token punctuation">.</span>username
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;input&quot;</span><span class="token punctuation">:</span> $event <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>$event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>composing<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        _this<span class="token punctuation">.</span>username <span class="token operator">=</span> $event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    directives<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">&quot;model&quot;</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> _this<span class="token punctuation">.</span>username
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><small><em><a href="https://jsx.egoist.moe/gist/7de4ca46ae8eb69dbd861e23c4603f64" target="_blank" rel="noopener noreferrer">在线演示<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em></small></p> <p>其实在 JSX 里的 <code>v-model</code> 就是语法糖，你当然可以手动书写对应的逻辑。而这个 Babel 插件则简化了这一步骤。JSX 中的 <code>v-model</code> 拥有 template 中同样的功能。</p> <h3 id="事件修饰符-插件页面"><a href="#事件修饰符-插件页面" aria-hidden="true" class="header-anchor">#</a> 事件修饰符 <sup><a href="https://github.com/nickmessing/babel-plugin-jsx-event-modifiers" target="_blank" rel="noopener noreferrer">插件页面<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></sup></h3> <p>template 中的键盘事件修饰符在 JSX 中也有完整的支持。</p> <p>对于以下 template:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keydown.enter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleEnter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click.stop.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>doThat<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对应的 JSX:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">onKeydown:</span>enter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleEnter<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
// 多个修饰符用 `-` 连字符连接
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">onClick:</span>stop-prevent</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>doThat<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre></div><p>转换之后的 JS:</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

<span class="token function">h</span><span class="token punctuation">(</span>
  <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;click&quot;</span><span class="token punctuation">:</span> $event <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        $event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        _this<span class="token punctuation">.</span><span class="token function">doThat</span><span class="token punctuation">(</span>$event<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;Click&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><small><em><a href="https://jsx.egoist.moe/gist/8b99c95854d389df4772e4b677966403" target="_blank" rel="noopener noreferrer">在线演示<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em></small></p></div></div></div> <!----></div> <footer class="footer" data-v-f119eb06 data-v-4eb3e300><div class="centered" data-v-f119eb06><span class="hide-on-mobile" data-v-f119eb06><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" data-v-f119eb06>CC BY-NC-ND 4.0</a></span> <span data-v-f119eb06>©</span> <span data-v-f119eb06><a data-v-f119eb06>Vue JSX 使用指南 | 庶民样本</a></span> <span class="hide-on-mobile" data-v-f119eb06><a href="https://github.com/undefined" data-v-f119eb06>Read the source code.</a></span></div></footer></div><div class="global-ui"></div></div>
    <script src="/vuepress-theme-egoist/assets/js/7.e9309730.js" defer></script><script src="/vuepress-theme-egoist/assets/js/55.f55e4720.js" defer></script><script src="/vuepress-theme-egoist/assets/js/app.ff7e2a0c.js" defer></script>
  </body>
</html>
