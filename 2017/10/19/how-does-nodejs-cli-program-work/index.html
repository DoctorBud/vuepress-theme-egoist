<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js 命令行程序是如何工作的 | 庶民样本</title>
    <meta name="description" content="EGOIST 在这里写作">
    
    
    <link rel="preload" href="/vuepress-theme-egoist/assets/css/0.styles.4100f462.css" as="style"><link rel="preload" href="/vuepress-theme-egoist/assets/js/app.ff7e2a0c.js" as="script"><link rel="preload" href="/vuepress-theme-egoist/assets/js/7.e9309730.js" as="script"><link rel="preload" href="/vuepress-theme-egoist/assets/js/33.c6321ab9.js" as="script"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/32.0552f872.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/2.306c48f2.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/3.de3933fa.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/4.7027339a.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/5.9a023447.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/6.0b23b3ef.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/8.1ef736ca.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/9.089f14da.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/10.90532339.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/11.1cf9229d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/12.3d320571.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/13.781fa514.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/14.46d0beb3.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/15.e343dce4.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/16.698e1c9c.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/17.60865632.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/18.dc4e67c0.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/19.c2730497.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/20.80fad5af.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/21.c5f4f37f.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/22.f98393c6.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/23.e37f7664.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/24.669cb146.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/25.ec3bfb6e.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/26.ce9c7dc2.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/27.d3b35f73.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/28.3915c5f6.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/29.b50b6ace.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/30.696dc884.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/31.f67a77db.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/34.b82896f4.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/35.d9f2fc5d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/36.39f6a30d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/37.1ef29e0e.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/38.6b7fa1fc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/39.ab9b6b96.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/40.a9fbabfc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/41.b1542eec.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/42.eb64ff9f.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/43.7d2b9071.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/44.793cb7d0.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/45.d544aa88.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/46.0f539cc5.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/47.fd43a0dc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/48.3d299ca0.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/49.2174a4db.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/50.191f9442.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/51.b2a28c58.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/52.da9ef4e5.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/53.cace61dd.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/54.842f4543.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/55.f55e4720.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/56.221f7aad.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/57.c0a4d767.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/58.df0838f9.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/59.fd7c112e.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/60.d10b16b1.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/61.0d401146.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/62.14accf47.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/63.53215d77.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/64.6ea5a974.js">
    <link rel="stylesheet" href="/vuepress-theme-egoist/assets/css/0.styles.4100f462.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-v-4eb3e300><header class="header" data-v-0c022ddd data-v-4eb3e300><h1 class="site-name" data-v-0c022ddd><a href="/vuepress-theme-egoist/" class="router-link-active" data-v-0c022ddd>
      e.z.
    </a></h1> <ul class="nav" data-v-0c022ddd><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/about.html" data-v-0c022ddd>about</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/girls.html" data-v-0c022ddd>girls</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/donate.html" data-v-0c022ddd>donate</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/tag/" data-v-0c022ddd>tags</a></li><li class="nav-item" data-v-0c022ddd><a href="/vuepress-theme-egoist/category/" data-v-0c022ddd>categories</a></li></ul></header> <div class="main" data-v-4eb3e300><div class="page-header" data-v-4eb3e300><h1 class="page-title" data-v-4eb3e300>Node.js 命令行程序是如何工作的</h1> <h2 class="page-subtitle" data-v-4eb3e300>
        命令行程序，也就是通过文本在终端中与程序进行交互
      </h2></div> <div class="page-body" data-v-4eb3e300><!----> <div class="markdown-body" data-v-4eb3e300><div class="content custom" data-v-4eb3e300><p>你可能已经知道，在终端里可以调用不同的解释器来执行你的程序，比如:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 执行一段 shell 脚本</span>
sh ./foo.sh
<span class="token comment"># 执行一段 node.js 代码</span>
node ./bar.js
</code></pre></div><p>下一步你想做的可能是省略解释器，直接通过运行 <code>./foo.sh</code> 或者 <code>./bar.js</code> 来执行你的程序。想在命令行输入命令时省略解释器，你可以将它写入实际运行的程序中，比如 <code>./bar.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><p>这段程序第一行由两部分组成，即 <strong>Shebang</strong> 和 <strong>解释器命令</strong>。<strong>Shebang</strong> 就是开头的 <code>#!</code>，它告诉系统调用后面声明的解释器，而我们需要调用的解释器是 <code>node</code>，执行 <code>/usr/bin/env node</code> 可以寻找到系统 <code>$PATH</code> 里第一个出现的 <code>node</code> 命令。</p> <p>这样你便可以通过执行 <code>./bar.js</code> 来执行这段程序了:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>❯ <span class="token function">chmod</span> +x bar.js
❯ ./bar.js
</code></pre></div><p>第一行的 <code>chmod +x bar.js</code> 是让系统允许将文件 <code>bar.js</code> 直接作为一段程序运行。现在你可以成功看到期望的输出:</p> <p><img src="https://i.loli.net/2017/10/18/59e724560f339.png" alt="bar"></p> <h2 id="命令行参数"><a href="#命令行参数" aria-hidden="true" class="header-anchor">#</a> 命令行参数</h2> <p>在网页应用里，我们依靠 <em>URL</em> 来获得展现页面内容所需要的参数，比如依靠路径 <code>/user/egoist</code> 来获取数据并渲染用户 <code>egoist</code> 的页面。而命令行程序所依靠的便是命令行参数。</p> <p>以刚才的 <code>bar.js</code> 为例，假设你需要将 <code>bar</code> 字符串重复 n 次输出，而 n 是用户决定的，你会这样做:</p> <div class="language-js extra-class"><pre class="language-js"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
<span class="token keyword">const</span> times <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>然后在终端可以看到期望的结果:</p> <p><img src="https://ooo.0o0.ooo/2017/10/18/59e72774a1ce7.png" alt="process.argv"></p> <p><code>process.argv</code> 是实际执行的命令参数列表(数组)，比如运行 <code>./bar 4</code> 实际执行的是 <code>node ./bar 4</code>，第一个参数是解释器命令 <code>node</code>，第二个是被执行的程序路径。而我们这里只需要第三个参数。</p> <hr> <p>正如浏览器里的 URL 有相应的各种路由解析库一样，将 <code>/user/egoist</code> 解析成 <code>{ username: 'egoist' }</code> 之类的，命令行参数当然也有，<a href="https://github.com/substack/minimist" target="_blank" rel="noopener noreferrer">minimist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 便是 node.js 社区里应用最多的一个:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> minimist <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'minimist'</span><span class="token punctuation">)</span>

<span class="token comment">// 大多数情况我们不需要关心 process.argv 的前两项</span>
<span class="token keyword">const</span> argv <span class="token operator">=</span> <span class="token function">minimist</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span>
</code></pre></div><p>使用不同的命令执行一下这段代码试试:</p> <p><img src="https://i.loli.net/2017/10/18/59e72c19cea1f.png" alt="minimist"></p> <p>之后你便可以灵活地通过 <code>argv</code> 来判断如何输出用户期望的内容了。</p> <p><strong>命令行参数小贴士</strong>:</p> <ul><li>形如 <code>--foo</code> 的叫做 <code>switch</code>，也就是代表了一个布尔值 <code>foo: true</code>，后面不加任何值。
<ul><li>一般用 <code>--no-foo</code> 来表示布尔值 <code>foo: false</code>。</li></ul></li> <li>形如 <code>--name egoist</code> 的叫做 <code>flag</code>, 即后面要加值，比如字符串和数字。
<ul><li>类似的写法是 <code>--name=egoist</code>，用 <code>=</code> 而不是空格来连接。</li></ul></li> <li>只有一个连字符的一般用于其它 flag 的简写，比如用 <code>-f</code> 作为 <code>--foo</code> 的简写，使用这两个之中任何一个的效果相同。连字符后面一般是单个字符，而一个连字符加多个字符其实相当于合并了多个简写，比如 <code>-xFd</code> 相当于 <code>-x -F -d</code>。</li> <li>某些命令行参数解释器支持用英文小数点 <code>.</code> 连接的参数，比如: <code>--foo.bar baz</code>，解析之后对象 <code>foo</code> 的属性 <code>bar</code> 的值就是 <code>baz</code>。</li></ul> <h2 id="命令行程序框架"><a href="#命令行程序框架" aria-hidden="true" class="header-anchor">#</a> 命令行程序框架</h2> <p>类似 web 开发，你当然可以完全从头写你的命令行程序，自己实现一个命令行参数解释器，然后自行判断如何根据参数返回结果。</p> <p>不过这有点浪费时间且本末倒置，如果你就是想学习那些方面的内容，你可以那样干，否则如果你只是想为你的一个奇思妙实现一个命令行工具，那就有点得不偿失，不如直接使用现成的框架来加速达成你原本的目标。</p> <h3 id="框架干了哪些事"><a href="#框架干了哪些事" aria-hidden="true" class="header-anchor">#</a> 框架干了哪些事</h3> <ul><li>根据不同的命令[^1]调用不同的模块。</li> <li>自动生成帮助信息，比如执行 <code>git --help</code> 显示的内容。</li> <li>让整个程序更安全，比如指定 flag 哪些是必需的。</li> <li>自动命令补全。</li></ul> <p>在这里我就不过多介绍框架了，毕竟只要了解原理就能举一反三，不过我还是推荐几个常用的，节省读者的时间:</p> <ul><li><a href="https://github.com/sindresorhus/meow" target="_blank" rel="noopener noreferrer">Meow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 简单的基于 <a href="https://github.com/substack/minimist" target="_blank" rel="noopener noreferrer">minimist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的包装，没什么新功能。</li> <li><a href="https://github.com/tj/commander.js" target="_blank" rel="noopener noreferrer">Commander.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 功能齐全的框架，提供类似 git 的子命令系统，自动生成帮助信息等。</li> <li><strong><a href="https://github.com/egoist/cac" target="_blank" rel="noopener noreferrer">CAC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 类似 Commander.js 但更轻巧、现代，支持插件。(我做的)</strong></li> <li><a href="http://yargs.js.org/" target="_blank" rel="noopener noreferrer">Yargs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 功能强大的框架，但显得过于臃肿。</li></ul> <p>这里用 CAC 举个简单的例子，介绍一下如何使用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 假设把它放在 cli.js 里</span>
<span class="token keyword">const</span> cli <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cac'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 定义一个命令</span>
cli<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">,</span> <span class="token string">'打招呼'</span><span class="token punctuation">,</span> input <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 开始解析 process.argv 并执行相应命令</span>
cli<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>执行 <code>./cli.js</code> 试试:</p> <p><img src="https://i.loli.net/2017/10/18/59e76be370455.png" alt="cac"></p> <p>如你所见，这里只会在执行 <code>hi</code> 命令之后才会打招呼。</p> <p>同时添加 <code>--help</code> flag 会打印出帮助信息:</p> <p><img src="https://ooo.0o0.ooo/2017/10/18/59e76f8c2d27a.png" alt="help"></p> <h2 id="配置-package-json"><a href="#配置-package-json" aria-hidden="true" class="header-anchor">#</a> 配置 package.json</h2> <p>要想让你的程序的可执行文件全局可用，你需要将其加入到系统 <code>PATH</code> 中，而 npm 简化了这一步骤:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-cli&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./cli.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在本地测试时执行 <code>npm link</code> 或者 <code>npm i -g .</code> 系统便有了 <code>my-cli</code> 命令。</p> <p>这里通过配置 <a href="https://docs.npmjs.com/files/package.json#bin" target="_blank" rel="noopener noreferrer">bin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 让 npm 在安装程序的时候在 <code>{prefix}/bin</code> 目录创建一个<a href="https://zh.wikipedia.org/zh-hans/%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" target="_blank" rel="noopener noreferrer">符号链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>指向 <code>./cli.js</code> 的绝对路径。在不同的情况下这个 <code>prefix</code> 不同:</p> <ul><li>全局安装的模块(即 <code>npm install -g</code>)的 <code>prefix</code> 是执行 <code>npm prefix -g</code> 得到的路径。</li> <li>否则将是当前目录里的 <code>./node_modules/.bin</code>。</li></ul> <p>[^1]: 这里的命令指程序中的命令，比如 <code>git</code> 程序中有个命令叫 <code>log</code>，你可以通过执行 <code>git log</code> 使用。</p></div></div></div> <!----></div> <footer class="footer" data-v-f119eb06 data-v-4eb3e300><div class="centered" data-v-f119eb06><span class="hide-on-mobile" data-v-f119eb06><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" data-v-f119eb06>CC BY-NC-ND 4.0</a></span> <span data-v-f119eb06>©</span> <span data-v-f119eb06><a data-v-f119eb06>Node.js 命令行程序是如何工作的 | 庶民样本</a></span> <span class="hide-on-mobile" data-v-f119eb06><a href="https://github.com/undefined" data-v-f119eb06>Read the source code.</a></span></div></footer></div><div class="global-ui"></div></div>
    <script src="/vuepress-theme-egoist/assets/js/7.e9309730.js" defer></script><script src="/vuepress-theme-egoist/assets/js/33.c6321ab9.js" defer></script><script src="/vuepress-theme-egoist/assets/js/app.ff7e2a0c.js" defer></script>
  </body>
</html>
