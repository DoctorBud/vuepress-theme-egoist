{"version":3,"sources":["webpack:///source/_posts/bili.md","webpack:///./source/_posts/bili.md?a9d5","webpack:///./source/_posts/bili.md","webpack:///./source/_posts/bili.md?8775"],"names":[],"mappings":"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","file":"assets/js/18.82790897.js","sourcesContent":["<template>\n<div class=\"content\"><h2 id=\"预习\"><a class=\"header-anchor\" href=\"#预习\" aria-hidden=\"true\">#</a> 预习</h2>\n<h3 id=\"rollup\"><a class=\"header-anchor\" href=\"#rollup\" aria-hidden=\"true\">#</a> Rollup</h3>\n<p><a href=\"https://github.com/rollup/rollup\" target=\"_blank\" rel=\"noopener noreferrer\">Rollup<OutboundLink/></a> 类似 <a href=\"https://webpack.js.org\" target=\"_blank\" rel=\"noopener noreferrer\">Webpack<OutboundLink/></a>/Browserify 之类的打包工具，但是打包出来的文件更小，即便是和 Webpack 3 相比。除此之外 Rollup 主要用于打包 library 并且拥有非常简单的 API 接口。</p>\n<h3 id=\"瑞士军刀\"><a class=\"header-anchor\" href=\"#瑞士军刀\" aria-hidden=\"true\">#</a> 瑞士军刀</h3>\n<p>多种用途，携带方便且操作简单，意外地看起来很酷。</p>\n<h2 id=\"授业\"><a class=\"header-anchor\" href=\"#授业\" aria-hidden=\"true\">#</a> 授业</h2>\n<blockquote>\n<p>学生 A：道理我都懂，可是 EGOIST sensei<a href=\"%E6%97%A5%E8%AF%AD%E4%B8%AD%E8%80%81%E5%B8%88(%E3%82%BB%E3%83%B3%E3%82%BB%E3%82%A4)%E7%9A%84%E6%84%8F%E6%80%9D%EF%BC%8C%E7%94%B1%E5%A5%B3%E9%AB%98%E4%B8%AD%E7%94%9F%E8%AF%B4%E5%87%BA%E6%9D%A5%E6%97%B6%E6%89%8D%E5%8F%AF%E5%85%85%E5%88%86%E8%A1%A8%E7%8E%B0%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%A0%E5%8A%9B%E3%80%82\">^sensei</a>! 为什么给 Rollup 套个皮就拿出来卖了？这根本不是编程！</p>\n</blockquote>\n<p>的确这不是什么有难度、有深度的东西，只是用来解决一个简单的问题：简化打包流程，提高人类自身价值感和归属感。</p>\n<blockquote>\n<p>学生 B：哦？是怎么做到的呢，想知道呢！sensei sensei 快告诉我！</p>\n</blockquote>\n<p>既然这个同学可爱地向我提问了那我就简明易懂地告诉大家吧！你可以在 <a href=\"https://github.com/rollup/rollup/wiki/JavaScript-API\" target=\"_blank\" rel=\"noopener noreferrer\">WIKI<OutboundLink/></a> 找到 Rollup 的 API 食用方法，简单地说它接受一个参数，而这个参数决定了如何寻找、操作你的源代码，比如:</p>\n<!--beforebegin--><div class=\"language-js extra-class\"><!--afterbegin--><pre v-pre class=\"language-js\"><code>rollup<span class=\"token punctuation\">.</span><span class=\"token function\">rollup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 从这个文件开始:</span>\n  entry<span class=\"token punctuation\">:</span> <span class=\"token string\">'src/index.js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 用写插件自定义如何转换代码吧</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>然后它会返回一个 Promise 把 <code>bundle</code> 送到你手上，你可以决定如何生成文件:</p>\n<!--beforebegin--><div class=\"language-js extra-class\"><!--afterbegin--><pre v-pre class=\"language-js\"><code>rollup<span class=\"token punctuation\">.</span><span class=\"token function\">rollup</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>bundle <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 我想写到磁盘上！</span>\n    bundle<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 等等 Rollup 娘，写成 commonjs 格式的哦！</span>\n      format<span class=\"token punctuation\">:</span> <span class=\"token string\">'cjs'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// 给生成的文件一个名字吧！</span>\n      dest<span class=\"token punctuation\">:</span> <span class=\"token string\">'bundle.js'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><blockquote>\n<p>学生 C 跳了起来: EGOIST sensei! 这看上去好简单啊，根本没你的 <a href=\"https://github.com/egoist/bili\" target=\"_blank\" rel=\"noopener noreferrer\">Bili<OutboundLink/></a> 的出场机会了啊 QAQ</p>\n</blockquote>\n<p>的确很简单，但是你可以看看 <a href=\"https://github.com/vuejs/vue/blob/dev/build/build.js\" target=\"_blank\" rel=\"noopener noreferrer\">Vue<OutboundLink/></a> 和 <a href=\"https://github.com/facebook/react/blob/master/scripts/rollup/build.js\" target=\"_blank\" rel=\"noopener noreferrer\">React<OutboundLink/></a> 的构建脚本，真是无比地冗长。</p>\n<p>越 low level 的 API 看起来就越简单，但在大项目中就会被有经验的开发者用更复杂的方式来使用，人们称这种情况为 <strong>M 属性</strong>，不过这已经在这节课的范畴之外了。</p>\n<p>简而言之，大多数项目都会有生成多个 bundle 的需求，比如不同格式的 bundle、抑或替换了不同变量的 bundle，你势必将多次使用 Rollup <strong>简单</strong>的 API 来解决这些需求。而将这一行为抽离出来，放进一个单独的工具中以便重复使用，便是 Bili 干的事:</p>\n<!--beforebegin--><div class=\"language-bash extra-class\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code>bili --format cjs,umd,es --compress umd\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>为了能尽可能直接用命令行就可以使用 Bili 的全部功能，<code>format</code> 接受以逗号分割的一个或多个格式名，当然数组也可以不过命令行里不太方便。</p>\n<p>让我们来看看使用原汁原味的 Rollup 来写看起来是什么样子:</p>\n<!--beforebegin--><div class=\"language-js extra-class\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> rollup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rollup'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">build</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> plugins <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ES2015 -> ES5</span>\n    <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-buble'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">let</span> compress <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">.</span><span class=\"token function\">endsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Compress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    format <span class=\"token operator\">=</span> format<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/Compress$/</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    compress <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>format <span class=\"token operator\">===</span> <span class=\"token string\">'umd'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 把第三方模块打包进来</span>\n    plugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-node-resolve'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-commonjs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>compress<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 压缩</span>\n    plugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-uglifyjs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">rollup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    entry<span class=\"token punctuation\">:</span> <span class=\"token string\">'src/index.js'</span><span class=\"token punctuation\">,</span>\n    plugins\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>bundle <span class=\"token operator\">=></span> bundle<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    dest<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`dist/index.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>format<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.js`</span></span><span class=\"token punctuation\">,</span>\n    format\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'umd'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'cjs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'es'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'umdCompress'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>build<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>就是以上这样的感觉，Bili 最近被中国超高校级的计算机协会授予了节能减排倡导先锋和键盘寿命拯救者的光荣称号，以及还有人类脑细胞的救星、键盘手杀手、让正太和萝莉也很容易地打包了这些市井称号。</p>\n<p><a href=\"https://github.com/search?l=JSON&amp;o=desc&amp;q=bili+scripts+build&amp;s=indexed&amp;type=Code&amp;utf8=%E2%9C%93\" target=\"_blank\" rel=\"noopener noreferrer\">Bili 被大量使用在我的前端库中<OutboundLink/></a>，有人会问那 CSS 以及图片、字体什么的怎么办，对于 CSS 我一般不会打包，直接原样交给用户。而字体、图片什么的一般也都是 CSS 里用的，自然同理。当然，我暂时还没有遇到需要字体和图片的情况。</p>\n<h2 id=\"放课后\"><a class=\"header-anchor\" href=\"#放课后\" aria-hidden=\"true\">#</a> 放课后</h2>\n<p>放学后同学们都会到家跃跃欲试，打开电脑，发现了 <a href=\"https://github.com/egoist/bili\" target=\"_blank\" rel=\"noopener noreferrer\">Bili<OutboundLink/></a> <a href=\"https://github.com/egoist/bili/releases/tag/v0.17.0\" target=\"_blank\" rel=\"noopener noreferrer\">v0.17<OutboundLink/></a> 的数个 breaking changes，当然都是花一分钟就能搞定的变更。</p>\n<p>从此，大家过上了幸福的打包生活。</p>\n</div>\n</template>\n<script>export default { props: ['target'] }</script>","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"https://github.com/rollup/rollup\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Rollup\"),_c('OutboundLink')],1),_vm._v(\" 类似 \"),_c('a',{attrs:{\"href\":\"https://webpack.js.org\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Webpack\"),_c('OutboundLink')],1),_vm._v(\"/Browserify 之类的打包工具，但是打包出来的文件更小，即便是和 Webpack 3 相比。除此之外 Rollup 主要用于打包 library 并且拥有非常简单的 API 接口。\")]),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('p',[_vm._v(\"多种用途，携带方便且操作简单，意外地看起来很酷。\")]),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('p',[_vm._v(\"的确这不是什么有难度、有深度的东西，只是用来解决一个简单的问题：简化打包流程，提高人类自身价值感和归属感。\")]),_vm._v(\" \"),_vm._m(5),_vm._v(\" \"),_c('p',[_vm._v(\"既然这个同学可爱地向我提问了那我就简明易懂地告诉大家吧！你可以在 \"),_c('a',{attrs:{\"href\":\"https://github.com/rollup/rollup/wiki/JavaScript-API\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"WIKI\"),_c('OutboundLink')],1),_vm._v(\" 找到 Rollup 的 API 食用方法，简单地说它接受一个参数，而这个参数决定了如何寻找、操作你的源代码，比如:\")]),_vm._v(\" \"),_vm._m(6),_vm._m(7),_vm._v(\" \"),_vm._m(8),_c('blockquote',[_c('p',[_vm._v(\"学生 C 跳了起来: EGOIST sensei! 这看上去好简单啊，根本没你的 \"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/bili\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Bili\"),_c('OutboundLink')],1),_vm._v(\" 的出场机会了啊 QAQ\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"的确很简单，但是你可以看看 \"),_c('a',{attrs:{\"href\":\"https://github.com/vuejs/vue/blob/dev/build/build.js\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Vue\"),_c('OutboundLink')],1),_vm._v(\" 和 \"),_c('a',{attrs:{\"href\":\"https://github.com/facebook/react/blob/master/scripts/rollup/build.js\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"React\"),_c('OutboundLink')],1),_vm._v(\" 的构建脚本，真是无比地冗长。\")]),_vm._v(\" \"),_vm._m(9),_vm._v(\" \"),_vm._m(10),_vm._v(\" \"),_vm._m(11),_vm._m(12),_vm._v(\" \"),_c('p',[_vm._v(\"让我们来看看使用原汁原味的 Rollup 来写看起来是什么样子:\")]),_vm._v(\" \"),_vm._m(13),_c('p',[_vm._v(\"就是以上这样的感觉，Bili 最近被中国超高校级的计算机协会授予了节能减排倡导先锋和键盘寿命拯救者的光荣称号，以及还有人类脑细胞的救星、键盘手杀手、让正太和萝莉也很容易地打包了这些市井称号。\")]),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"https://github.com/search?l=JSON&o=desc&q=bili+scripts+build&s=indexed&type=Code&utf8=%E2%9C%93\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Bili 被大量使用在我的前端库中\"),_c('OutboundLink')],1),_vm._v(\"，有人会问那 CSS 以及图片、字体什么的怎么办，对于 CSS 我一般不会打包，直接原样交给用户。而字体、图片什么的一般也都是 CSS 里用的，自然同理。当然，我暂时还没有遇到需要字体和图片的情况。\")]),_vm._v(\" \"),_vm._m(14),_vm._v(\" \"),_c('p',[_vm._v(\"放学后同学们都会到家跃跃欲试，打开电脑，发现了 \"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/bili\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Bili\"),_c('OutboundLink')],1),_vm._v(\" \"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/bili/releases/tag/v0.17.0\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"v0.17\"),_c('OutboundLink')],1),_vm._v(\" 的数个 breaking changes，当然都是花一分钟就能搞定的变更。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"从此，大家过上了幸福的打包生活。\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"预习\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#预习\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 预习\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"rollup\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#rollup\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Rollup\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"瑞士军刀\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#瑞士军刀\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 瑞士军刀\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"授业\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#授业\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 授业\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('blockquote',[_c('p',[_vm._v(\"学生 A：道理我都懂，可是 EGOIST sensei\"),_c('a',{attrs:{\"href\":\"%E6%97%A5%E8%AF%AD%E4%B8%AD%E8%80%81%E5%B8%88(%E3%82%BB%E3%83%B3%E3%82%BB%E3%82%A4)%E7%9A%84%E6%84%8F%E6%80%9D%EF%BC%8C%E7%94%B1%E5%A5%B3%E9%AB%98%E4%B8%AD%E7%94%9F%E8%AF%B4%E5%87%BA%E6%9D%A5%E6%97%B6%E6%89%8D%E5%8F%AF%E5%85%85%E5%88%86%E8%A1%A8%E7%8E%B0%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BC%A0%E5%8A%9B%E3%80%82\"}},[_vm._v(\"^sensei\")]),_vm._v(\"! 为什么给 Rollup 套个皮就拿出来卖了？这根本不是编程！\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('blockquote',[_c('p',[_vm._v(\"学生 B：哦？是怎么做到的呢，想知道呢！sensei sensei 快告诉我！\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-js extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-js\"}},[_c('code',[_vm._v(\"rollup\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"rollup\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 从这个文件开始:\")]),_vm._v(\"\\n  entry\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'src/index.js'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 用写插件自定义如何转换代码吧\")]),_vm._v(\"\\n  plugins\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"然后它会返回一个 Promise 把 \"),_c('code',[_vm._v(\"bundle\")]),_vm._v(\" 送到你手上，你可以决定如何生成文件:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-js extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-js\"}},[_c('code',[_vm._v(\"rollup\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"rollup\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"options\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"then\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"bundle \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=>\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 我想写到磁盘上！\")]),_vm._v(\"\\n    bundle\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"write\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 等等 Rollup 娘，写成 commonjs 格式的哦！\")]),_vm._v(\"\\n      format\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'cjs'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 给生成的文件一个名字吧！\")]),_vm._v(\"\\n      dest\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'bundle.js'\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"越 low level 的 API 看起来就越简单，但在大项目中就会被有经验的开发者用更复杂的方式来使用，人们称这种情况为 \"),_c('strong',[_vm._v(\"M 属性\")]),_vm._v(\"，不过这已经在这节课的范畴之外了。\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"简而言之，大多数项目都会有生成多个 bundle 的需求，比如不同格式的 bundle、抑或替换了不同变量的 bundle，你势必将多次使用 Rollup \"),_c('strong',[_vm._v(\"简单\")]),_vm._v(\"的 API 来解决这些需求。而将这一行为抽离出来，放进一个单独的工具中以便重复使用，便是 Bili 干的事:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"bili --format cjs,umd,es --compress umd\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"为了能尽可能直接用命令行就可以使用 Bili 的全部功能，\"),_c('code',[_vm._v(\"format\")]),_vm._v(\" 接受以逗号分割的一个或多个格式名，当然数组也可以不过命令行里不太方便。\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-js extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-js\"}},[_c('code',[_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"import\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\" rollup \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"from\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'rollup'\")]),_vm._v(\"\\n\\n\"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"function\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"build\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"format\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"const\")]),_vm._v(\" plugins \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// ES2015 -> ES5\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"require\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'rollup-plugin-buble'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_vm._v(\"\\n\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"let\")]),_vm._v(\" compress \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token boolean\"}},[_vm._v(\"false\")]),_vm._v(\"\\n\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"format\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"endsWith\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'Compress'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    format \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" format\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"replace\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token regex\"}},[_vm._v(\"/Compress$/\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"''\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n    compress \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token boolean\"}},[_vm._v(\"true\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"format \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"===\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'umd'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 把第三方模块打包进来\")]),_vm._v(\"\\n    plugins\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"push\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"require\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'rollup-plugin-node-resolve'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"require\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'rollup-plugin-commonjs'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"compress\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 压缩\")]),_vm._v(\"\\n    plugins\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"push\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"require\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'rollup-plugin-uglifyjs'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"rollup\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    entry\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'src/index.js'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n    plugins\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"then\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"bundle \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=>\")]),_vm._v(\" bundle\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"write\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    dest\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token template-string\"}},[_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"`dist/index.\")]),_c('span',{attrs:{\"class\":\"token interpolation\"}},[_c('span',{attrs:{\"class\":\"token interpolation-punctuation punctuation\"}},[_vm._v(\"${\")]),_vm._v(\"format\"),_c('span',{attrs:{\"class\":\"token interpolation-punctuation punctuation\"}},[_vm._v(\"}\")])]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\".js`\")])]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n    format\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\\nPromise\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"all\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'umd'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'cjs'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'es'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'umdCompress'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"map\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"build\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"then\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=>\")]),_vm._v(\" console\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"log\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'done'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"catch\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"err \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=>\")]),_vm._v(\" console\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"error\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"err\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"放课后\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#放课后\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 放课后\")])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./bili.md?vue&type=template&id=72994d0d&\"\nimport script from \"./bili.md?vue&type=script&lang=js&\"\nexport * from \"./bili.md?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../@vuepress/core/lib/webpack/markdownLoader.js??ref--1-2!./bili.md?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../@vuepress/core/lib/webpack/markdownLoader.js??ref--1-2!./bili.md?vue&type=script&lang=js&\""],"sourceRoot":""}