{"version":3,"sources":["webpack:///source/_posts/bundle-front-end-js-library.md","webpack:///./source/_posts/bundle-front-end-js-library.md?5476","webpack:///./source/_posts/bundle-front-end-js-library.md","webpack:///./source/_posts/bundle-front-end-js-library.md?fcd1"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AAAA;AAAA,G;;;;;;;;;;;;;;AClCA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,iBAAiB,sBAAsB,8PAA8P,OAAO,+FAA+F,gPAAgP,OAAO,qFAAqF,uKAAuK,OAAO,yFAAyF,yUAAyU,OAAO,iGAAiG,uVAAuV,OAAO,oGAAoG;AAC16D,oCAAoC,aAAa,0BAA0B,wBAAwB,gBAAgB,OAAO,aAAa,UAAU,mCAAmC,qCAAqC,0DAA0D,cAAc,aAAa,0BAA0B,wBAAwB,iBAAiB,wCAAwC,YAAY,gBAAgB,yBAAyB,qFAAqF,cAAc,aAAa,0BAA0B,wBAAwB,yYAAyY,cAAc,aAAa,0BAA0B,wBAAwB,gNAAgN,cAAc,aAAa,0BAA0B,wBAAwB,gBAAgB,OAAO,eAAe,UAAU,mCAAmC,uCAAuC,4DAA4D,cAAc,aAAa,0BAA0B,wBAAwB,4HAA4H,cAAc,aAAa,0BAA0B,wBAAwB,iBAAiB,sCAAsC,YAAY,gBAAgB,uBAAuB,yCAAyC,OAAO,6BAA6B,8CAA8C,OAAO,0BAA0B,uCAAuC,OAAO,6BAA6B,WAAW,yCAAyC,OAAO,6BAA6B,uCAAuC,OAAO,0BAA0B,iCAAiC,OAAO,6BAA6B,2BAA2B,OAAO,wBAAwB,+CAA+C,OAAO,6BAA6B,2BAA2B,OAAO,6BAA6B,2BAA2B,OAAO,6BAA6B,WAAW,wCAAwC,OAAO,6BAA6B,uCAAuC,OAAO,6BAA6B,2BAA2B,OAAO,wBAAwB,kCAAkC,OAAO,6BAA6B,0CAA0C,OAAO,6BAA6B,WAAW,gBAAgB,OAAO,6BAA6B,wCAAwC,OAAO,6BAA6B,WAAW,wBAAwB,cAAc,aAAa,0BAA0B,wBAAwB,gBAAgB,OAAO,cAAc,UAAU,mCAAmC,sCAAsC,2DAA2D,cAAc,aAAa,0BAA0B,wBAAwB,2GAA2G,cAAc,aAAa,0BAA0B,wBAAwB,iBAAiB,sCAAsC,YAAY,gBAAgB,uBAAuB,yCAAyC,OAAO,6BAA6B,8CAA8C,OAAO,0BAA0B,uCAAuC,OAAO,6BAA6B,WAAW,oCAAoC,OAAO,6BAA6B,uCAAuC,OAAO,6BAA6B,WAAW,6CAA6C,OAAO,6BAA6B,uCAAuC,OAAO,wBAAwB,uDAAuD,OAAO,6BAA6B,WAAW,6BAA6B,OAAO,6BAA6B,WAAW,wBAAwB,cAAc,aAAa,0BAA0B,wBAAwB,gBAAgB,OAAO,mBAAmB,UAAU,mCAAmC,2CAA2C,gEAAgE,cAAc,aAAa,0BAA0B,wBAAwB,kKAAkK,cAAc,aAAa,0BAA0B,wBAAwB,gBAAgB,OAAO,aAAa,UAAU,mCAAmC,qCAAqC,0DAA0D;;;;;;;;;;;;;;;;;;ACDvsK;AAClC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gF;;;;;;;;;;;;;;wCClBkU,gWAAoB,C","file":"assets/js/22.ffc9d5dd.js","sourcesContent":["<template>\n<div class=\"content\"><p>打包 JS 库没有打包 Web App 那样复杂，但还是可以变得更简单。</p>\n<h2 id=\"常见用例\"><a class=\"header-anchor\" href=\"#常见用例\" aria-hidden=\"true\">#</a> <span>常见用例</span></h2>\n<p>一个 JS 库一般需要一个 CommonJS 版本，它不会打包 node_modules 里的模块。以及一个 UMD 版本的，用于在浏览器中直接使用，它会打包 node_modules 里的模块。</p>\n<p>使用 <a href=\"https://github.com/universe-denpa/bili\" target=\"_blank\" rel=\"noopener noreferrer\">bili<OutboundLink/></a> 一切都会变得简单，简单到只需要一条命令:</p>\n<!--beforebegin--><div class=\"language-bash extra-class\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code>bili --format cjs --format umd --module-name MyModule\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>这条命令的意思是打包 <code>./src/index.js</code> 到 <code>./dist</code> 目录，并且转换成 <code>CommonJS</code> 和 <code>UMD</code> 格式的文件，其中 <code>UMD</code> 格式中模块名设定为 <code>MyModule</code>，这样在浏览器中就可以通过全局变量 <code>MyModule</code> 引用。</p>\n<p>如果你同时需要一个压缩后的 UMD 格式文件，直接加上 <code>--compress</code> 参数就能额外得到一个 <code>.min.js</code> 和它的 <code>sourcemap</code> 文件。</p>\n<h2 id=\"es2015\"><a class=\"header-anchor\" href=\"#es2015\" aria-hidden=\"true\">#</a> <span>ES2015</span></h2>\n<p>打包的一个目的就是使用 Babel 之类的转换器编译 ES next 到 ES5，bili 默认使用 <a href=\"https://buble.surge.sh/guide\" target=\"_blank\" rel=\"noopener noreferrer\">buble<OutboundLink/></a> 来转换 JavaScript 代码，相比 Babel 它更轻量。</p>\n<p>你当然也可以在 bili 中使用 babel 来编译代码，这需要用到 bili 的配置文件 <code>bili.config.js</code>:</p>\n<!--beforebegin--><div class=\"language-js extra-class\"><!--afterbegin--><pre v-pre class=\"language-js\"><code>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  jsCompiler<span class=\"token punctuation\">:</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-babel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    presets<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'preset'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>bili 是基于 <a href=\"https://github.com/rollup/rollup\" target=\"_blank\" rel=\"noopener noreferrer\">Rollup<OutboundLink/></a> 的，所以相关 Rollup 插件都可以用来编译 JS 代码。</p>\n<h2 id=\"buble\"><a class=\"header-anchor\" href=\"#buble\" aria-hidden=\"true\">#</a> <span>Buble</span></h2>\n<p>正如之前说了，默认我们使用 <code>buble</code>，你可以在配置文件中更改 buble 的配置参数:</p>\n<!--beforebegin--><div class=\"language-js extra-class\"><!--afterbegin--><pre v-pre class=\"language-js\"><code>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  buble<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    objectAssign<span class=\"token punctuation\">:</span> <span class=\"token string\">'objectAssign'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>值得一提的是，buble 不支持 <code>async/await</code> 并且不能将 <code>generator</code> 转换成 ES5 代码，所以我们保留了 generator 代码并且用 <a href=\"https://github.com/leebyron/async-to-gen\" target=\"_blank\" rel=\"noopener noreferrer\">async-to-gen<OutboundLink/></a> 将 <code>async/await</code> 转换到 <code>generator</code>，如果用到了这两个请考虑浏览器兼容性，或者换成 babel 来编译。</p>\n<h2 id=\"watch-mode\"><a class=\"header-anchor\" href=\"#watch-mode\" aria-hidden=\"true\">#</a> <span>Watch mode</span></h2>\n<p>在开发的时候编译代码没有 <code>watch</code> 模式会非常痛苦，想开启 bili 的 watch 模式可以直接加上 <code>--watch</code> 参数。</p>\n<h2 id=\"更多资料\"><a class=\"header-anchor\" href=\"#更多资料\" aria-hidden=\"true\">#</a> <span>更多资料</span></h2>\n<p>bili 还内置了一些常用的 Rollup 插件，更多使用方法请参考 bili 的 <a href=\"https://github.com/universe-denpa/bili/wiki\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Wiki<OutboundLink/></a> 页面。</p>\n</div>\n</template>\n<script>export default { props: ['target'] }</script>","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('p',[_vm._v(\"打包 JS 库没有打包 Web App 那样复杂，但还是可以变得更简单。\")]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('p',[_vm._v(\"一个 JS 库一般需要一个 CommonJS 版本，它不会打包 node_modules 里的模块。以及一个 UMD 版本的，用于在浏览器中直接使用，它会打包 node_modules 里的模块。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"使用 \"),_c('a',{attrs:{\"href\":\"https://github.com/universe-denpa/bili\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"bili\"),_c('OutboundLink')],1),_vm._v(\" 一切都会变得简单，简单到只需要一条命令:\")]),_vm._v(\" \"),_vm._m(1),_vm._m(2),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('p',[_vm._v(\"打包的一个目的就是使用 Babel 之类的转换器编译 ES next 到 ES5，bili 默认使用 \"),_c('a',{attrs:{\"href\":\"https://buble.surge.sh/guide\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"buble\"),_c('OutboundLink')],1),_vm._v(\" 来转换 JavaScript 代码，相比 Babel 它更轻量。\")]),_vm._v(\" \"),_vm._m(5),_vm._v(\" \"),_vm._m(6),_c('p',[_vm._v(\"bili 是基于 \"),_c('a',{attrs:{\"href\":\"https://github.com/rollup/rollup\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Rollup\"),_c('OutboundLink')],1),_vm._v(\" 的，所以相关 Rollup 插件都可以用来编译 JS 代码。\")]),_vm._v(\" \"),_vm._m(7),_vm._v(\" \"),_vm._m(8),_vm._v(\" \"),_vm._m(9),_c('p',[_vm._v(\"值得一提的是，buble 不支持 \"),_c('code',[_vm._v(\"async/await\")]),_vm._v(\" 并且不能将 \"),_c('code',[_vm._v(\"generator\")]),_vm._v(\" 转换成 ES5 代码，所以我们保留了 generator 代码并且用 \"),_c('a',{attrs:{\"href\":\"https://github.com/leebyron/async-to-gen\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"async-to-gen\"),_c('OutboundLink')],1),_vm._v(\" 将 \"),_c('code',[_vm._v(\"async/await\")]),_vm._v(\" 转换到 \"),_c('code',[_vm._v(\"generator\")]),_vm._v(\"，如果用到了这两个请考虑浏览器兼容性，或者换成 babel 来编译。\")]),_vm._v(\" \"),_vm._m(10),_vm._v(\" \"),_vm._m(11),_vm._v(\" \"),_vm._m(12),_vm._v(\" \"),_c('p',[_vm._v(\"bili 还内置了一些常用的 Rollup 插件，更多使用方法请参考 bili 的 \"),_c('a',{attrs:{\"href\":\"https://github.com/universe-denpa/bili/wiki\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"GitHub Wiki\"),_c('OutboundLink')],1),_vm._v(\" 页面。\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"常见用例\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#常见用例\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" \"),_c('span',[_vm._v(\"常见用例\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"bili --format cjs --format umd --module-name MyModule\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"这条命令的意思是打包 \"),_c('code',[_vm._v(\"./src/index.js\")]),_vm._v(\" 到 \"),_c('code',[_vm._v(\"./dist\")]),_vm._v(\" 目录，并且转换成 \"),_c('code',[_vm._v(\"CommonJS\")]),_vm._v(\" 和 \"),_c('code',[_vm._v(\"UMD\")]),_vm._v(\" 格式的文件，其中 \"),_c('code',[_vm._v(\"UMD\")]),_vm._v(\" 格式中模块名设定为 \"),_c('code',[_vm._v(\"MyModule\")]),_vm._v(\"，这样在浏览器中就可以通过全局变量 \"),_c('code',[_vm._v(\"MyModule\")]),_vm._v(\" 引用。\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"如果你同时需要一个压缩后的 UMD 格式文件，直接加上 \"),_c('code',[_vm._v(\"--compress\")]),_vm._v(\" 参数就能额外得到一个 \"),_c('code',[_vm._v(\".min.js\")]),_vm._v(\" 和它的 \"),_c('code',[_vm._v(\"sourcemap\")]),_vm._v(\" 文件。\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"es2015\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#es2015\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" \"),_c('span',[_vm._v(\"ES2015\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"你当然也可以在 bili 中使用 babel 来编译代码，这需要用到 bili 的配置文件 \"),_c('code',[_vm._v(\"bili.config.js\")]),_vm._v(\":\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-js extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-js\"}},[_c('code',[_vm._v(\"module\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"exports \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  jsCompiler\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"require\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'rollup-plugin-babel'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    presets\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'preset'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"buble\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#buble\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Buble\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"正如之前说了，默认我们使用 \"),_c('code',[_vm._v(\"buble\")]),_vm._v(\"，你可以在配置文件中更改 buble 的配置参数:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-js extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-js\"}},[_c('code',[_vm._v(\"module\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"exports \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  buble\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    objectAssign\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'objectAssign'\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"watch-mode\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#watch-mode\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Watch mode\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"在开发的时候编译代码没有 \"),_c('code',[_vm._v(\"watch\")]),_vm._v(\" 模式会非常痛苦，想开启 bili 的 watch 模式可以直接加上 \"),_c('code',[_vm._v(\"--watch\")]),_vm._v(\" 参数。\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"更多资料\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#更多资料\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" \"),_c('span',[_vm._v(\"更多资料\")])])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./bundle-front-end-js-library.md?vue&type=template&id=4031576f&\"\nimport script from \"./bundle-front-end-js-library.md?vue&type=script&lang=js&\"\nexport * from \"./bundle-front-end-js-library.md?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../@vuepress/core/lib/webpack/markdownLoader.js??ref--1-2!./bundle-front-end-js-library.md?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../@vuepress/core/lib/webpack/markdownLoader.js??ref--1-2!./bundle-front-end-js-library.md?vue&type=script&lang=js&\""],"sourceRoot":""}