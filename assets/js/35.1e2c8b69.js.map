{"version":3,"sources":["webpack:///source/_posts/my-rollup-plugin-postcss.md","webpack:///./source/_posts/my-rollup-plugin-postcss.md?7ba8","webpack:///./source/_posts/my-rollup-plugin-postcss.md","webpack:///./source/_posts/my-rollup-plugin-postcss.md?6330"],"names":[],"mappings":"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","file":"assets/js/35.1e2c8b69.js","sourcesContent":["<template>\n<div class=\"content\"><p><a href=\"https://github.com/egoist/rollup-plugin-postcss\" target=\"_blank\" rel=\"noopener noreferrer\">rollup-plugin-postcss<OutboundLink/></a> 是我两年前开源的一个项目，用于为 <a href=\"https://rollupjs.org/guide/en\" target=\"_blank\" rel=\"noopener noreferrer\">Rollup<OutboundLink/></a> 提供 <a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"noopener noreferrer\">PostCSS<OutboundLink/></a> 支持。</p>\n<p>这基本上是我刚开始工作的时候写的代码，所以见证了我一段心路历程。</p>\n<h2 id=\"_2015-年-12-月-8-日\"><a class=\"header-anchor\" href=\"#_2015-年-12-月-8-日\" aria-hidden=\"true\">#</a> 2015 年 12 月 8 日</h2>\n<p>我<a href=\"https://github.com/egoist/rollup-plugin-postcss/commit/ed445b067e0772aa39403db23bfb2bc4b6129aef#diff-04c6e90faac2675aa89e2176d2eec7d8\" target=\"_blank\" rel=\"noopener noreferrer\">首次提交了代码<OutboundLink/></a>，那个时候我的邮箱还是 <code>aprilorange.net@icloud.com</code>[^1]，不过早已由于忘记密码且无法申诉而永久无法登录了。</p>\n<p>当时的代码极为简单，仅仅是调用 <code>postcss</code> 转换 CSS 代码并提供 <code>plugins</code> 参数:</p>\n<!--beforebegin--><div class=\"language-js extra-class\"><!--afterbegin--><pre v-pre class=\"language-js\"><code><span class=\"token keyword\">import</span> postcss <span class=\"token keyword\">from</span> <span class=\"token string\">'postcss'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> styleInject <span class=\"token keyword\">from</span> <span class=\"token string\">'style-inject'</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">intro</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> styleInject<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">transform</span> <span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">-</span><span class=\"token number\">4</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'.css'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      code <span class=\"token operator\">=</span> <span class=\"token function\">postcss</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>plugins <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>css<span class=\"token punctuation\">;</span>\n      code <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`export default styleInject(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">);`</span></span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        code<span class=\"token punctuation\">,</span>\n        map<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> mappings<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>之后就在当天，我向 PostCSS 项目提交 PR 请求在 README 上列出我的这个项目，而这个 PR 的序号也很溜: https://github.com/postcss/postcss/pull/666</p>\n<p>发这个 Issue 的时候我刚下班，骑着自行车回家的途中发现收到了回复，我就停下车来，靠着自行车在成都万象城旁边傻站着摸着手机回复。</p>\n<p>PostCSS 的维护者告诉我应该使用异步的 API，我也就照做了，然后就发生了:</p>\n<p><img src=\"https://i.loli.net/2018/02/27/5a94fe69825e3.png\" alt=\"lol\"></p>\n<p>其实我当时还不太懂 Promise，经他指出之后研究了一下才发现一个函数已经返回了 Promise 就不用再把它 wrap 进一个 Promise 了:</p>\n<p><img src=\"https://i.loli.net/2018/02/27/5a94fec490e73.png\" alt=\"promise\"></p>\n<p>在这之后我也看到过其它人像我以前那样写，就感觉很好，因为我再也不会那么傻了。</p>\n<h2 id=\"_2015-年-12-月-23-日\"><a class=\"header-anchor\" href=\"#_2015-年-12-月-23-日\" aria-hidden=\"true\">#</a> 2015 年 12 月 23 日</h2>\n<p>开源两周后，这个项目迎来了<a href=\"https://github.com/egoist/rollup-plugin-postcss/issues/1\" target=\"_blank\" rel=\"noopener noreferrer\">第一个 Issue<OutboundLink/></a>，我当时是很激动的:</p>\n<p><img src=\"https://i.loli.net/2018/02/27/5a9500dcc43a7.png\" alt=\"issue 1\"></p>\n<p>这个人可能在今天已经为读者们所熟知，也就是 <a href=\"https://github.com/developit/preact\" target=\"_blank\" rel=\"noopener noreferrer\">Preact<OutboundLink/></a> 的作者，我记得在当时 Preact 还只有几百个 stars?</p>\n<h2 id=\"_2016-年-5-月-29-日\"><a class=\"header-anchor\" href=\"#_2016-年-5-月-29-日\" aria-hidden=\"true\">#</a> 2016 年 5 月 29 日</h2>\n<p>半年没更新这个项目了，难道是没人用吗，我也不知道因为我自己也不用。不过当时我似乎挺喜欢用 <a href=\"https://github.com/avajs/ava\" target=\"_blank\" rel=\"noopener noreferrer\">AVA<OutboundLink/></a> 写测试，因为 CLI 效果很炫而且默认就支持用 ES2015 写测试。</p>\n<p>于是我就 commit 了一发<a href=\"https://github.com/egoist/rollup-plugin-postcss/commit/9698d66ca1f04a2308c94fe74d94d184f2891b96\" target=\"_blank\" rel=\"noopener noreferrer\">将 Mocha 替换成 AVA<OutboundLink/></a> 了。</p>\n<p>[^1]: 我的笔名叫四月橘林，所以当时英文名就叫 April Orange XD</p>\n<h2 id=\"_2016-年-9-月-2-日\"><a class=\"header-anchor\" href=\"#_2016-年-9-月-2-日\" aria-hidden=\"true\">#</a> 2016 年 9 月 2 日</h2>\n<p>这天有人来了个 <a href=\"https://github.com/egoist/rollup-plugin-postcss/pull/5\" target=\"_blank\" rel=\"noopener noreferrer\">PR<OutboundLink/></a>，尽管不知道 fix 了什么我还是合了吧?</p>\n<p>之后又来了一些 contributors，慢慢地我就懒得管了，基本全都是他们在 fix bugs 或者添加新 features，逐渐地我自己也看不懂里面的代码了 😅</p>\n<h2 id=\"_2018-年-1-月-10-日\"><a class=\"header-anchor\" href=\"#_2018-年-1-月-10-日\" aria-hidden=\"true\">#</a> 2018 年 1 月 10 日</h2>\n<p>过了一年多，我突然找回了责任心，想起了那句责任越大能力越大，打算重写一下这个项目。在此之前我折腾了很久的 webpack，于是就得到了一些重写的灵感，想让这个插件以 <code>loader</code> 的方式支持任何 CSS 预处理器，而且刚好 <a href=\"https://github.com/parcel-bundler/parcel\" target=\"_blank\" rel=\"noopener noreferrer\">Parcel<OutboundLink/></a> 突然流行了起来，我也就顺便让它无需配置便能编译 CSS/Sass/Less/Stylus。和每次重构之后的心情一样，我再次觉得这次的代码写得很完美了。</p>\n<p><img src=\"https://i.loli.net/2018/02/27/5a9505707f0ea.png\" alt=\"current\"></p>\n<h2 id=\"_2018-年-2-月-27-日\"><a class=\"header-anchor\" href=\"#_2018-年-2-月-27-日\" aria-hidden=\"true\">#</a> 2018 年 2 月 27 日</h2>\n<p>今天，也就是我写这篇文章的日子，rollup-plugin-postcss 已被 <a href=\"https://github.com/egoist/rollup-plugin-postcss/network/dependents\" target=\"_blank\" rel=\"noopener noreferrer\">900<OutboundLink/></a> 多个项目使用，其中包括像 <a href=\"https://github.com/developit/microbundle\" target=\"_blank\" rel=\"noopener noreferrer\">microbundle<OutboundLink/></a> 和 <a href=\"https://github.com/egoist/bili\" target=\"_blank\" rel=\"noopener noreferrer\">bili<OutboundLink/></a> 这样基于 Rollup 的打包工具。</p>\n<p>照目前的趋势来看，目前的代码还没有崩坏的迹象，在一段时间内可读性还能维持在较高范围。</p>\n</div>\n</template>\n<script>export default { props: ['target'] }</script>","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('p',[_c('a',{attrs:{\"href\":\"https://github.com/egoist/rollup-plugin-postcss\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"rollup-plugin-postcss\"),_c('OutboundLink')],1),_vm._v(\" 是我两年前开源的一个项目，用于为 \"),_c('a',{attrs:{\"href\":\"https://rollupjs.org/guide/en\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Rollup\"),_c('OutboundLink')],1),_vm._v(\" 提供 \"),_c('a',{attrs:{\"href\":\"https://github.com/postcss/postcss\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"PostCSS\"),_c('OutboundLink')],1),_vm._v(\" 支持。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"这基本上是我刚开始工作的时候写的代码，所以见证了我一段心路历程。\")]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('p',[_vm._v(\"我\"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/rollup-plugin-postcss/commit/ed445b067e0772aa39403db23bfb2bc4b6129aef#diff-04c6e90faac2675aa89e2176d2eec7d8\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"首次提交了代码\"),_c('OutboundLink')],1),_vm._v(\"，那个时候我的邮箱还是 \"),_c('code',[_vm._v(\"aprilorange.net@icloud.com\")]),_vm._v(\"[^1]，不过早已由于忘记密码且无法申诉而永久无法登录了。\")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_c('p',[_vm._v(\"之后就在当天，我向 PostCSS 项目提交 PR 请求在 README 上列出我的这个项目，而这个 PR 的序号也很溜: https://github.com/postcss/postcss/pull/666\")]),_vm._v(\" \"),_c('p',[_vm._v(\"发这个 Issue 的时候我刚下班，骑着自行车回家的途中发现收到了回复，我就停下车来，靠着自行车在成都万象城旁边傻站着摸着手机回复。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"PostCSS 的维护者告诉我应该使用异步的 API，我也就照做了，然后就发生了:\")]),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_c('p',[_vm._v(\"其实我当时还不太懂 Promise，经他指出之后研究了一下才发现一个函数已经返回了 Promise 就不用再把它 wrap 进一个 Promise 了:\")]),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('p',[_vm._v(\"在这之后我也看到过其它人像我以前那样写，就感觉很好，因为我再也不会那么傻了。\")]),_vm._v(\" \"),_vm._m(5),_vm._v(\" \"),_c('p',[_vm._v(\"开源两周后，这个项目迎来了\"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/rollup-plugin-postcss/issues/1\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"第一个 Issue\"),_c('OutboundLink')],1),_vm._v(\"，我当时是很激动的:\")]),_vm._v(\" \"),_vm._m(6),_vm._v(\" \"),_c('p',[_vm._v(\"这个人可能在今天已经为读者们所熟知，也就是 \"),_c('a',{attrs:{\"href\":\"https://github.com/developit/preact\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Preact\"),_c('OutboundLink')],1),_vm._v(\" 的作者，我记得在当时 Preact 还只有几百个 stars?\")]),_vm._v(\" \"),_vm._m(7),_vm._v(\" \"),_c('p',[_vm._v(\"半年没更新这个项目了，难道是没人用吗，我也不知道因为我自己也不用。不过当时我似乎挺喜欢用 \"),_c('a',{attrs:{\"href\":\"https://github.com/avajs/ava\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"AVA\"),_c('OutboundLink')],1),_vm._v(\" 写测试，因为 CLI 效果很炫而且默认就支持用 ES2015 写测试。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"于是我就 commit 了一发\"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/rollup-plugin-postcss/commit/9698d66ca1f04a2308c94fe74d94d184f2891b96\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"将 Mocha 替换成 AVA\"),_c('OutboundLink')],1),_vm._v(\" 了。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"[^1]: 我的笔名叫四月橘林，所以当时英文名就叫 April Orange XD\")]),_vm._v(\" \"),_vm._m(8),_vm._v(\" \"),_c('p',[_vm._v(\"这天有人来了个 \"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/rollup-plugin-postcss/pull/5\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"PR\"),_c('OutboundLink')],1),_vm._v(\"，尽管不知道 fix 了什么我还是合了吧?\")]),_vm._v(\" \"),_c('p',[_vm._v(\"之后又来了一些 contributors，慢慢地我就懒得管了，基本全都是他们在 fix bugs 或者添加新 features，逐渐地我自己也看不懂里面的代码了 😅\")]),_vm._v(\" \"),_vm._m(9),_vm._v(\" \"),_c('p',[_vm._v(\"过了一年多，我突然找回了责任心，想起了那句责任越大能力越大，打算重写一下这个项目。在此之前我折腾了很久的 webpack，于是就得到了一些重写的灵感，想让这个插件以 \"),_c('code',[_vm._v(\"loader\")]),_vm._v(\" 的方式支持任何 CSS 预处理器，而且刚好 \"),_c('a',{attrs:{\"href\":\"https://github.com/parcel-bundler/parcel\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Parcel\"),_c('OutboundLink')],1),_vm._v(\" 突然流行了起来，我也就顺便让它无需配置便能编译 CSS/Sass/Less/Stylus。和每次重构之后的心情一样，我再次觉得这次的代码写得很完美了。\")]),_vm._v(\" \"),_vm._m(10),_vm._v(\" \"),_vm._m(11),_vm._v(\" \"),_c('p',[_vm._v(\"今天，也就是我写这篇文章的日子，rollup-plugin-postcss 已被 \"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/rollup-plugin-postcss/network/dependents\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"900\"),_c('OutboundLink')],1),_vm._v(\" 多个项目使用，其中包括像 \"),_c('a',{attrs:{\"href\":\"https://github.com/developit/microbundle\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"microbundle\"),_c('OutboundLink')],1),_vm._v(\" 和 \"),_c('a',{attrs:{\"href\":\"https://github.com/egoist/bili\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"bili\"),_c('OutboundLink')],1),_vm._v(\" 这样基于 Rollup 的打包工具。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"照目前的趋势来看，目前的代码还没有崩坏的迹象，在一段时间内可读性还能维持在较高范围。\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"_2015-年-12-月-8-日\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_2015-年-12-月-8-日\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 2015 年 12 月 8 日\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"当时的代码极为简单，仅仅是调用 \"),_c('code',[_vm._v(\"postcss\")]),_vm._v(\" 转换 CSS 代码并提供 \"),_c('code',[_vm._v(\"plugins\")]),_vm._v(\" 参数:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"language-js extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-js\"}},[_c('code',[_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"import\")]),_vm._v(\" postcss \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"from\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'postcss'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"import\")]),_vm._v(\" styleInject \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"from\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'style-inject'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n \\n\"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"export\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"default\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"function\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"options \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"intro\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" styleInject\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"toString\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"transform\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"code\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" id\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"if\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"id\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"slice\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"-\")]),_c('span',{attrs:{\"class\":\"token number\"}},[_vm._v(\"4\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"!==\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'.css'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"null\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n      code \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"postcss\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"options\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"plugins \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"||\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"process\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"code\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"css\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n      code \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token template-string\"}},[_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"`export default styleInject(\")]),_c('span',{attrs:{\"class\":\"token interpolation\"}},[_c('span',{attrs:{\"class\":\"token interpolation-punctuation punctuation\"}},[_vm._v(\"${\")]),_c('span',{attrs:{\"class\":\"token constant\"}},[_vm._v(\"JSON\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"stringify\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"code\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token interpolation-punctuation punctuation\"}},[_vm._v(\"}\")])]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\");`\")])]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"return\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n        code\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\"\\n        map\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\" mappings\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"''\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n      \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n    \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('img',{attrs:{\"src\":\"https://i.loli.net/2018/02/27/5a94fe69825e3.png\",\"alt\":\"lol\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('img',{attrs:{\"src\":\"https://i.loli.net/2018/02/27/5a94fec490e73.png\",\"alt\":\"promise\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"_2015-年-12-月-23-日\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_2015-年-12-月-23-日\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 2015 年 12 月 23 日\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('img',{attrs:{\"src\":\"https://i.loli.net/2018/02/27/5a9500dcc43a7.png\",\"alt\":\"issue 1\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"_2016-年-5-月-29-日\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_2016-年-5-月-29-日\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 2016 年 5 月 29 日\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"_2016-年-9-月-2-日\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_2016-年-9-月-2-日\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 2016 年 9 月 2 日\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"_2018-年-1-月-10-日\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_2018-年-1-月-10-日\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 2018 年 1 月 10 日\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('img',{attrs:{\"src\":\"https://i.loli.net/2018/02/27/5a9505707f0ea.png\",\"alt\":\"current\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"_2018-年-2-月-27-日\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#_2018-年-2-月-27-日\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 2018 年 2 月 27 日\")])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./my-rollup-plugin-postcss.md?vue&type=template&id=701133e2&\"\nimport script from \"./my-rollup-plugin-postcss.md?vue&type=script&lang=js&\"\nexport * from \"./my-rollup-plugin-postcss.md?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../@vuepress/core/lib/webpack/markdownLoader.js??ref--1-2!./my-rollup-plugin-postcss.md?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../../node_modules/vue-loader/lib/index.js??ref--1-1!../../../@vuepress/core/lib/webpack/markdownLoader.js??ref--1-2!./my-rollup-plugin-postcss.md?vue&type=script&lang=js&\""],"sourceRoot":""}