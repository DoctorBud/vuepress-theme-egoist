<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js 模块风格指南 | 庶民样本</title>
    <meta name="description" content="EGOIST 在这里写作">
    
    
    <link rel="preload" href="/vuepress-theme-egoist/assets/css/0.styles.1662f62e.css" as="style"><link rel="preload" href="/vuepress-theme-egoist/assets/js/app.cdf6243a.js" as="script"><link rel="preload" href="/vuepress-theme-egoist/assets/js/5.9b256514.js" as="script"><link rel="preload" href="/vuepress-theme-egoist/assets/js/38.f2c3ad55.js" as="script"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/30.8fe44570.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/2.1e10d2df.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/3.2e58bd55.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/4.df926e0c.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/6.12cab749.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/7.ebb52ad2.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/8.7559805d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/9.f30756a5.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/10.91b2b568.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/11.2bbb05a9.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/12.db5d6f9a.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/13.fc6dab3f.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/14.89213dd8.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/15.dbd9011d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/16.50af137d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/17.3d944e2b.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/18.99223755.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/19.0c31ab30.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/20.e81c4b41.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/21.76bfee02.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/22.a7acb70b.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/23.3dff1725.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/24.180cbeb6.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/25.ddac2530.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/26.9303fc4d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/27.f7ed4490.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/28.fa5242bb.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/29.15c868ec.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/31.e7aa77b1.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/32.5a9502bf.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/33.d9278899.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/34.043ae31a.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/35.2405ca10.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/36.ee4ffbfc.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/37.96ca534d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/39.a6f8a9fb.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/40.90bfe906.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/41.98ca27b8.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/42.a10ca0ca.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/43.7ea50e29.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/44.226e240d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/45.4fdf1fc1.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/46.fe23bfa4.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/47.224e17e7.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/48.f7f066d3.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/49.e4f65d07.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/50.d0c97e64.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/51.2c35bfd8.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/52.ddfac4f1.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/53.805b8f99.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/54.17aad456.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/55.547d2957.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/56.d73bb885.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/57.547a3c78.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/58.db07d65d.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/59.f1457d61.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/60.732d563b.js"><link rel="prefetch" href="/vuepress-theme-egoist/assets/js/61.86825a2d.js">
    <link rel="stylesheet" href="/vuepress-theme-egoist/assets/css/0.styles.1662f62e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-v-4eb3e300><header class="header" data-v-dff55cfe data-v-4eb3e300><h1 class="site-name" data-v-dff55cfe><a href="/vuepress-theme-egoist/" class="router-link-active" data-v-dff55cfe>
      庶民样本
    </a></h1> <ul class="nav" data-v-dff55cfe><li class="nav-item" data-v-dff55cfe><a href="/vuepress-theme-egoist/about.html" data-v-dff55cfe>about</a></li><li class="nav-item" data-v-dff55cfe><a href="/vuepress-theme-egoist/girls.html" data-v-dff55cfe>girls</a></li><li class="nav-item" data-v-dff55cfe><a href="/vuepress-theme-egoist/donate.html" data-v-dff55cfe>donate</a></li></ul></header> <div class="main" data-v-4eb3e300><div class="page-header" data-v-4eb3e300><h1 class="page-title" data-v-4eb3e300>Node.js 模块风格指南</h1> <h2 class="page-subtitle" data-v-4eb3e300>
        编写高质量、可复用的 Node.js 模块
      </h2></div> <div class="page-body" data-v-4eb3e300><!----> <div class="markdown-body" data-v-4eb3e300><div class="content custom" data-v-4eb3e300><p>JavaScript 代码一向的特点就是难以维护，保持一个良好的代码、组织风格有助于提升效率、重构代码、添加新功能、单元测试等等。</p> <p>我总结了一下写了 200 个 NPM package 之后的一些个人经验和习惯。</p> <h2 id="初始化一个项目"><a href="#初始化一个项目" aria-hidden="true" class="header-anchor">#</a> <span>初始化一个项目</span></h2> <p>不再使用 <code>npm init</code>。因为除了 <code>package.json</code> 还有一些额外的配置文件，比如 <code>circle.yml</code>、<code>.editorconfig</code>、<code>LICENSE</code> 、<code>README.md</code> 等等。</p> <p>使用 <a href="http://yeoman.io" target="_blank" rel="noopener noreferrer">yeoman<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。如果你喜欢在代码中使用分号和用 travis 来测试，推荐 <a href="https://github.com/sindresorhus" target="_blank" rel="noopener noreferrer">sindresorhus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 用的 <a href="https://github.com/sindresorhus/generator-nm" target="_blank" rel="noopener noreferrer">generator-nm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。如果你不喜欢分号并且用 circle 来测试，推荐我用的 <a href="https://github.com/egoist/generator-esnm" target="_blank" rel="noopener noreferrer">generator-esnm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>想要定制你的 README.md ? <a href="https://github.com/IonicaBizau/blah" target="_blank" rel="noopener noreferrer">blah<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以为你定制生成 README.md 以及更多提升效率的功能。</p> <h2 id="注释"><a href="#注释" aria-hidden="true" class="header-anchor">#</a> <span>注释</span></h2> <p>每一个具有单独意义的代码片段前都推荐写注释，就算再简单的代码你隔几天看也不可能一秒看出它在干什么，而有了注释就可以。对于复杂且意义重大的代码尽量写完整的 jsdoc 来说明。</p> <p>另一个原因就是这样可以让你的代码显得更格式化，代码挤在一堆很傻且不美观。而且你也可以自动从你代码的 jsdoc 生成 api doc！</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**	
 * Module dependencies
 */</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * Reverse array but not change itself
 *
 * @param {Array} names
 * @return {Array}
 */</span>
<span class="token keyword">function</span> <span class="token function">rev</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> names<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="编写可复用模块"><a href="#编写可复用模块" aria-hidden="true" class="header-anchor">#</a> <span>编写可复用模块</span></h2> <p>对于一个项目中多次使用（&gt;1）的代码，推荐放入单独的文件作为模块使用。<br>
对于更为通用的代码尽量打包进一个单独的 npm module 来使用。</p> <h2 id="代码风格指南"><a href="#代码风格指南" aria-hidden="true" class="header-anchor">#</a> <span>代码风格指南</span></h2> <p>对于分号的问题不作讨论，加不加都行。</p> <p>对于异步代码，尽量不要使用 callback 而是改成 Promise，并且把 HTTP 请求封装进单独的模块，这样更方便配合 <a href="https://github.com/tj/co" target="_blank" rel="noopener noreferrer">co<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// fetchData.js</span>
<span class="token comment">// 老式回调风格</span>
<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'superagent'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	request
		<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'xxx.json'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">callback</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// app.js</span>
<span class="token comment">// 调用它</span>
<span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./fetchData'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">fetchData</span><span class="token punctuation">(</span>data <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// fetchData.js</span>
<span class="token comment">// 无阻塞同步代码风格</span>
<span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-fetch'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> co<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'xxx.json'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> data
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// app.js</span>
<span class="token comment">// 调用它</span>
<span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./fetchData'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> co<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>还使用 co? 不是有 async/await 吗?</strong></p> <p>在 async/await 没被 v8 引擎实现之前用 co 都还是第一选择，除非某些情况你使用了 babel 那你可以考虑使用 async/await。不过即使现在用 co 在将来 async/await api 被实现的时候也能轻松地迁移过去。</p> <blockquote><p>co is a stepping stone towards ES7 async/await -- TJ Holowaychuk</p></blockquote> <h2 id="eslint"><a href="#eslint" aria-hidden="true" class="header-anchor">#</a> <span>ESLint</span></h2> <p>保持良好代码风格的方法之一就是 lint 你的代码，选择你习惯的代码风格，用编辑器实时 lint 或者添加一些 git hook 在 commit 的时候 lint 也可以。</p> <p>我目前使用 <a href="https://github.com/sindresorhus/xo" target="_blank" rel="noopener noreferrer">xo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来检测代码，它默认无需配置但你可以根据你的喜好调整，基于 ESLint 。如果你喜欢这个风格也可以直接在 ESlint 中使用它的<a href="https://github.com/sindresorhus/eslint-config-xo" target="_blank" rel="noopener noreferrer">配置文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="测试"><a href="#测试" aria-hidden="true" class="header-anchor">#</a> <span>测试</span></h2> <p>写测试是很有趣的，当且仅当你用 <a href="https://github.com/sindresorhus/ava" target="_blank" rel="noopener noreferrer">AVA<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的时候。</p> <p><img src="https://camo.githubusercontent.com/fc55513ee5cb412b2b0d1540032b602ed0142dbe/68747470733a2f2f63646e2e7261776769742e636f6d2f73696e647265736f726875732f6176612f666531636561316361336432633835313863306363333965633862653539326265616239303535382f6d656469612f6c6f676f2e737667" alt="ava"></p> <p>我使用 AVA 的主要原因是:</p> <ul><li>很快</li> <li>语法简洁</li> <li>内置 ES2015/2016</li> <li>many more...</li></ul> <h2 id="commit-风格"><a href="#commit-风格" aria-hidden="true" class="header-anchor">#</a> <span>Commit</span> 风格</h2> <p>不使用没有意义的 Commit 信息，比如单纯只写个 <code>fix</code>、<code>update</code>、<code>change</code>。</p> <p>尽量描述你干了什么事:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -m <span class="token string">&quot;fix tweak on ie9&quot;</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;release 0.0.1&quot;</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;refactor to use es2015&quot;</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;🔥&quot;</span>
</code></pre></div><p>更好的做法是使用 <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">commitizen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来规范你的 commit message 格式。</p> <p><img src="https://github.com/commitizen/cz-cli/raw/master/meta/screenshots/add-commit.png" alt="commitizen"></p> <h2 id="semantic-release"><a href="#semantic-release" aria-hidden="true" class="header-anchor">#</a> <span>Semantic-Release</span></h2> <p>发布 NPM 模块是很让人困扰的一步，你需要手动 bump version，需要执行 <code>npm test</code> 来看是否有错，然后再手动执行 <code>npm publish</code>，这些步骤可以被规范且自动化。</p> <p>使用 <a href="https://github.com/semantic-release/semantic-release" target="_blank" rel="noopener noreferrer">semantic-release<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以自动分析你的 commit message 然后根据这些推测你的代码改动来进行语义化的版本号升级并自动更新 changelog，<a href="https://github.com/egoist/tooling/releases" target="_blank" rel="noopener noreferrer">这些<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 就是自动生成的。</p> <h2 id="_2016"><a href="#_2016" aria-hidden="true" class="header-anchor">#</a> <span>2016</span></h2> <p>200 more modules? Exciting! ✨</p></div></div></div> <!----></div> <footer class="footer" data-v-f119eb06 data-v-4eb3e300><div class="centered" data-v-f119eb06><span class="hide-on-mobile" data-v-f119eb06><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" data-v-f119eb06>CC BY-NC-ND 4.0</a></span> <span data-v-f119eb06>©</span> <span data-v-f119eb06><a data-v-f119eb06>Node.js 模块风格指南 | 庶民样本</a></span> <span class="hide-on-mobile" data-v-f119eb06><a href="https://github.com/undefined" data-v-f119eb06>Read the source code.</a></span></div></footer></div><div class="global-ui"></div></div>
    <script src="/vuepress-theme-egoist/assets/js/5.9b256514.js" defer></script><script src="/vuepress-theme-egoist/assets/js/38.f2c3ad55.js" defer></script><script src="/vuepress-theme-egoist/assets/js/app.cdf6243a.js" defer></script>
  </body>
</html>
